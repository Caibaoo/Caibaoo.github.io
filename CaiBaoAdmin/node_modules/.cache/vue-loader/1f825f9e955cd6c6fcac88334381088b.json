{"remainingRequest":"D:\\大创\\2019应用能力大赛\\swhelper后台界面\\swhelper1.0\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\大创\\2019应用能力大赛\\swhelper后台界面\\swhelper1.0\\src\\views\\List.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"D:\\大创\\2019应用能力大赛\\swhelper后台界面\\swhelper1.0\\src\\views\\List.vue","mtime":1555821172606},{"path":"D:\\大创\\2019应用能力大赛\\swhelper后台界面\\swhelper1.0\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\大创\\2019应用能力大赛\\swhelper后台界面\\swhelper1.0\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\大创\\2019应用能力大赛\\swhelper后台界面\\swhelper1.0\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\大创\\2019应用能力大赛\\swhelper后台界面\\swhelper1.0\\node_modules\\sass-loader\\lib\\loader.js","mtime":1533139052000},{"path":"D:\\大创\\2019应用能力大赛\\swhelper后台界面\\swhelper1.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\大创\\2019应用能力大赛\\swhelper后台界面\\swhelper1.0\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.tim-note {\n  bottom: 10px;\n  color: #c0c1c2;\n  display: block;\n  font-weight: 400;\n  font-size: 13px;\n  line-height: 13px;\n  left: 0;\n  margin-left: 20px;\n  width: 260px;\n}\n",{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqhBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-app>\n    <v-container\n      fluid\n      grid-list-xl\n      fill-height>\n      <v-layout\n        row\n        wrap>\n        <v-flex xs6>\n          <el-form label-position=\"right\">\n            <el-form-item label=\"启事类型\">\n              <el-select\n                v-model=\"sNoticeType\"\n                placeholder=\"请选择\">\n                <el-option\n                  v-for=\"item in noticeType\"\n                  :key=\"item.index\"\n                  :label=\"item.name\"\n                  :value=\"item.index\"\n                ></el-option>\n              </el-select>\n            </el-form-item>\n          </el-form>\n        </v-flex>\n        <v-flex xs6>\n          <el-form label-position=\"right\">\n            <el-form-item label=\"物品类型\">\n              <el-select\n                v-model=\"sArticleNo\"\n                placeholder=\"请选择\">\n                <el-option\n                  v-for=\"item in articleNo\"\n                  :key=\"item.value\"\n                  :label=\"item.label\"\n                  :value=\"item.value\"\n                ></el-option>\n              </el-select>\n            </el-form-item>\n          </el-form>\n        </v-flex>\n        <v-flex xs6>\n          <el-form label-position=\"right\">\n            <el-form-item label=\"搜关键词\">\n              <el-input\n                v-model=\"sText\"\n                placeholder=\"搜索关键字\"\n                style=\"width:200px\"></el-input>\n            </el-form-item>\n          </el-form>\n        </v-flex>\n        <v-flex xs6>\n          <el-button\n            style=\"center\"\n            size=\"medium\"\n            type=\"warning\"\n            @click=\"search(sNoticeType, sArticleNo, sText)\"\n          >搜索</el-button>\n        </v-flex>\n        <v-flex md12>\n          <material-card\n            color=\"green\"\n            title=\"拾到信息列表\"\n            text=\"\">\n            <v-data-table\n              :headers=\"pHeaders\"\n              :items=\"pickPageList\"\n              hide-actions>\n              <template>\n                <span\n                  class=\"subheading font-weight-light text-success text--darken-3\"\n                />\n              </template>\n              <template\n                v-if=\"item.noticeType == '2'\"\n                slot=\"items\"\n                slot-scope=\"{ item }\">\n                <td>{{ item.noticeID }}</td>\n                <td>{{ item.userNo }}</td>\n                <td>{{ articleNo[item.articleNo].label }}</td>\n                <td>{{ item.place }}</td>\n                <td>{{ item.time|moment(\"YYYY-MM-DD\") }}</td>\n                <td>{{ item.depositPlace }}</td>\n                <td>{{ item.phone }}</td>\n                <td>{{ item.loseNo }}</td>\n                <td>{{ item.noticeTime|moment(\"YYYY-MM-DD\") }}</td>\n                <td class=\"text-xs-center\">\n                  <v-menu offset-y>\n                    <template v-slot:activator=\"{ on }\">\n                      <v-btn\n                        v-if=\"item.noticeStatus == '0'\"\n                        color=\"green\"\n                        dark\n                        v-on=\"on\">发布中</v-btn>\n                      <v-btn\n                        v-else\n                        color=\"blue-grey\"\n                        dark\n                        v-on=\"on\">已关闭</v-btn>\n                    </template>\n                    <v-list>\n                      <v-list-tile\n                        v-for=\"(item2, index) in statusList\"\n                        :key=\"index\">\n                        <v-btn\n                          v-if=\"item2.value=='0'\"\n                          color=\"green\"\n                          @click=\"changeNoticeStatus(item.noticeID, '0')\"\n                        >{{ item2.status }}</v-btn>\n                        <v-btn\n                          v-else\n                          color=\"blue-grey\"\n                          @click=\"changeNoticeStatus(item.noticeID, '1')\"\n                        >{{ item2.status }}</v-btn>\n                      </v-list-tile>\n                    </v-list>\n                  </v-menu>\n                </td>\n                <td class=\"text-xs-right\">\n                  <el-popover\n                    placement=\"right\"\n                    width=\"400\"\n                    trigger=\"click\">\n                    <p>{{ item.note }}</p>\n                    <v-img :src ='item.uploadImg'></v-img>\n                    <el-button slot=\"reference\">详情</el-button>\n                  </el-popover>\n                </td>\n              </template>\n            </v-data-table>\n          </material-card>\n          <div\n            class=\"text-xs-center\"\n            @click=\"pickPage(page.pick)\"\n          >\n            <v-pagination\n              v-model=\"page.pick\"\n              :length=\"maxPage.pick\"\n              :total-visible=\"7\"\n            ></v-pagination>\n          </div>\n        </v-flex>\n        <v-flex md12>\n          <material-card\n            color=\"green\"\n            title=\"丢失信息列表\"\n            text=\"\">\n            <v-data-table\n              :headers=\"lHeaders\"\n              :items=\"losePageList\"\n              hide-actions>\n              <template>\n                <span\n                  class=\"subheading font-weight-light text-success text--darken-3\"\n                />\n              </template>\n              <template\n                v-if=\"item.noticeType == '1'\"\n                slot=\"items\"\n                slot-scope=\"{ item }\">\n                <td>{{ item.noticeID }}</td>\n                <td>{{ item.userNo }}</td>\n                <td>{{ articleNo[item.articleNo].label }}</td>\n                <td>{{ item.place }}</td>\n                <td>{{ item.time|moment(\"YYYY-MM-DD\") }}</td>\n                <td>{{ item.phone }}</td>\n                <td>{{ item.loseNo }}</td>\n                <td>{{ item.noticeTime|moment(\"YYYY-MM-DD\") }}</td>\n                <td class=\"text-xs-center\">\n                  <v-menu offset-y>\n                    <template v-slot:activator=\"{ on }\">\n                      <v-btn\n                        v-if=\"item.noticeStatus == '0'\"\n                        color=\"green\"\n                        dark\n                        v-on=\"on\">发布中</v-btn>\n                      <v-btn\n                        v-else\n                        color=\"blue-grey\"\n                        dark\n                        v-on=\"on\">已关闭</v-btn>\n                    </template>\n                    <v-list>\n                      <v-list-tile\n                        v-for=\"(item2, index) in statusList\"\n                        :key=\"index\">\n                        <v-btn\n                          v-if=\"item2.value=='0'\"\n                          color=\"green\"\n                          @click=\"changeNoticeStatus(item.noticeID, '0')\"\n                        >{{ item2.status }}</v-btn>\n                        <v-btn\n                          v-else\n                          color=\"blue-grey\"\n                          @click=\"changeNoticeStatus(item.noticeID, '1')\"\n                        >{{ item2.status }}</v-btn>\n                      </v-list-tile>\n                    </v-list>\n                  </v-menu>\n                </td>\n                <td class=\"text-xs-right\">\n                  <el-popover\n                    placement=\"right\"\n                    width=\"400\"\n                    trigger=\"click\">\n                    <p>{{ item.note }}</p>\n                    <v-img :src ='item.uploadImg'></v-img>\n                    <el-button slot=\"reference\">详情</el-button>\n                  </el-popover>\n                </td>\n              </template>\n            </v-data-table>\n          </material-card>\n          <div\n            class=\"text-xs-center\"\n            @click=\"losePage(page.lose)\"\n          >\n            <v-pagination\n              v-model=\"page.lose\"\n              :length=\"maxPage.lose\"\n              :total-visible=\"7\"\n            ></v-pagination>\n          </div>\n        </v-flex>\n      </v-layout>\n      <!-- <router-view></router-view> -->\n    </v-container>\n  </v-app>\n</template>\n\n<script>\nimport {\n  mapState,\n  mapActions\n} from 'vuex'\nexport default {\n  data: () => ({\n    sNoticeType: '0',\n    sArticleNo: '0',\n    sText: '',\n    list: '',\n    pickList: [],\n    loseList: [],\n    pickPageList: [],\n    losePageList: [],\n    // 当前页\n    page: {\n      pick: '',\n      lose: ''\n    },\n    // 最大页数\n    maxPage: {\n      pick: '',\n      lose: ''\n    },\n    // 启事类型\n    noticeType: [\n      { name: '全部', index: '0', showTemporary: false },\n      { name: '丢失', index: '1', showTemporary: false },\n      { name: '拾到', index: '2', showTemporary: true }\n    ],\n    // 启事状态选项列表\n    statusList: [\n      { value: '0', status: '发布中', color: 'info' },\n      { value: '1', status: '已关闭', color: '' }\n    ],\n    // 物品类型\n    articleNo: [\n      {\n        value: '0',\n        label: '全部',\n        loseNoShow: true\n      },\n      {\n        value: \"1\",\n        label: \"校园卡\",\n        loseNoShow:true\n      },\n      {\n        value: \"2\",\n        label: \"雨伞\",\n        loseNoShow:false\n      },\n      {\n        value: \"3\",\n        label: \"U盘\",\n        loseNoShow:false\n      },\n      {\n        value: \"4\",\n        label: \"水杯\",\n        loseNoShow:false\n      },\n      {\n        value: \"5\",\n        label: \"耳机\",\n        loseNoShow:false\n      },\n      {\n        value: \"6\",\n        label: \"钥匙\",\n        loseNoShow:false\n      },\n      {\n        value: \"7\",\n        label: \"眼镜\",\n        loseNoShow:false\n      },\n      {\n        value: \"8\",\n        label: \"其他\",\n        loseNoShow:false\n      }\n    ],\n    // 拾到头部\n    pHeaders: [\n      {\n        sortable: false,\n        text: 'ID',\n        value: 'noticeID'\n      },\n      {\n        sortable: false,\n        text: '发布者',\n        value: 'userNo'\n      },\n      {\n        sortable: false,\n        text: '物品类型',\n        value: 'articleNo'\n      },\n      {\n        sortable: false,\n        text: '地点',\n        value: 'place'\n      },\n      {\n        sortable: false,\n        text: '时间',\n        value: 'time'\n      },\n      {\n        sortable: false,\n        text: '寄存点',\n        value: 'depositPlace'\n      },\n      {\n        sortable: false,\n        text: '电话',\n        value: 'phone'\n      },\n      {\n        sortable: false,\n        text: '失者学号',\n        value: 'loseNo'\n      },\n      {\n        sortable: false,\n        text: '发布时间',\n        value: 'noticeTime'\n      },\n      {\n        sortable: false,\n        text: '状态',\n        value: 'noticeStatus'\n      },\n      {\n        sortable: false,\n        text: '备注',\n        value: 'note',\n        align: 'right'\n      }\n    ],\n    // 丢失头部\n    lHeaders: [\n      {\n        sortable: false,\n        text: 'ID',\n        value: 'noticeID'\n      },\n      {\n        sortable: false,\n        text: '发布者',\n        value: 'userNo'\n      },\n      {\n        sortable: false,\n        text: '物品类型',\n        value: 'articleNo'\n      },\n      {\n        sortable: false,\n        text: '地点',\n        value: 'place'\n      },\n      {\n        sortable: false,\n        text: '时间',\n        value: 'time'\n      },\n      {\n        sortable: false,\n        text: '电话',\n        value: 'phone'\n      },\n      {\n        sortable: false,\n        text: '失者学号',\n        value: 'loseNo'\n      },\n      {\n        sortable: false,\n        text: '发布时间',\n        value: 'noticeTime'\n      },\n      {\n        sortable: false,\n        text: '状态',\n        value: 'noticeStatus'\n      },\n      {\n        sortable: false,\n        text: '备注',\n        value: 'note',\n        align: 'right'\n      }\n    ]\n  }),\n  methods: {\n    // 调整分页显示的列表\n    pickPage (page) {\n        this.pickPageList = []\n        var start = page*10 - 10\n        var end = start + 10\n        for( var i = start; i < end; i++){\n          if( this.pickList[i] != undefined ){\n            this.pickPageList.push(this.pickList[i])\n          } else {\n            break\n          }\n        }\n    },\n    losePage (page) {\n      this.losePageList = []\n      var start = page*10 - 10\n      var end = start + 10\n      for( var i = start; i < end; i++){\n        if( this.loseList[i] != undefined ){\n          this.losePageList.push(this.loseList[i])\n        } else {\n          break\n        }\n      }\n    },\n    ...mapActions({\n      getArticleList: 'GET_ARTICLELIST'\n    }),\n    test () {\n      console.log(this.articleList)\n    },\n    // 搜索指定启事\n    search (sNoticeType, sArticleNo, sText) {\n      console.log(sNoticeType, sArticleNo, sText)\n      var that = this\n      var sType = 0\n      that.axios.post('/api/getSearchList', {\n        sNoticeType,\n        sArticleNo,\n        sText,\n        sType\n      }).then(function (res) {\n        that.loseList = []\n        that.pickList = []\n        that.losePageList = []\n        that.pickPageList = []\n        for( var i = 0; i < res.data.length; i++){\n          if( res.data[i].noticeType == 1 ) {\n            that.loseList.push(res.data[i])\n          } else {\n            that.pickList.push(res.data[i])            \n          }\n        }\n        that.maxPage.pick = Math.ceil(that.loseList.length/10)\n        that.maxPage.lose = Math.ceil(that.pickList.length/10)\n        that.list = res.data\n        that.pickPage(1)\n        that.losePage(1)\n      }).catch(function (res) {\n        console.log(res)\n      })\n    },\n    // 改变启事状态\n    changeNoticeStatus (noticeID, noticeStatus) {\n      console.log(noticeID, noticeStatus)\n      var that = this\n      that.axios.post('/api/changeNoticeStatus', {\n        noticeID,\n        noticeStatus\n      }).then(function (res) {\n        if (res.data === '0000') {\n          that.$router.push('/l-refresh')\n        }\n      }).catch(function (res) {\n        console.log(res)\n      })\n      // this.search(this.sNoticeType, this.sArticleNo, this.sText)\n    }\n  },\n  computed: {\n    ...mapState({\n      login: state => state.login,\n      testList: state => state.articleList\n    })\n  },\n  created () {\n    var that = this\n    that.axios.post('/api/getArticleList')\n      .then(function (res) {\n        if (res.data) {\n          that.$store.state.articleList = res.data\n        }\n      }).catch(function (res) {\n        console.log(res)\n      })\n    if (that.login) {\n      that.search(that.sNoticeType, that.sArticleNo, that.sText)\n    } else {\n      that.$router.push('/admin')\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n.tim-note {\n  bottom: 10px;\n  color: #c0c1c2;\n  display: block;\n  font-weight: 400;\n  font-size: 13px;\n  line-height: 13px;\n  left: 0;\n  margin-left: 20px;\n  width: 260px;\n}\n</style>"]}]}